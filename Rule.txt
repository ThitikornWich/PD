# กฎและข้อจำกัดในการจัดตารางกะ (BD Production) — **MERGED & FULL DETAIL + วันดอกไม้จีน**

---

## 1. โครงสร้างทีม/สาขา
- **มี 3 สาขา:**
    - DC (สำนักงานใหญ่)
    - นารา
    - สาขา 2 (กรุงเทพเหนือ)

---

## 2. กฎทั่วไปสำหรับรอบกะและวันหยุด
- **รอบการจัดกะ:**  
    - เริ่มวันที่ 26 ของเดือน และสิ้นสุดวันที่ 25 ของเดือนถัดไปเสมอ
- **วันหยุดนักขัตฤกษ์/วันสำคัญทางศาสนา:**  
    - ระบุเป็น "วันเงียบ" จัดคนเข้าน้อย  
    - หลังวันเงียบ: ควรจัดคนเข้าเยอะเป็นพิเศษ  
    - **วันแคมเปญบริษัท** (เช่น วันแม่/วันพ่อ): จัดคนเต็ม เพราะต้องใช้คนเยอะ
    - โดยทั่วไป 90% ของวันหยุดนักขัตฤกษ์/ศาสนา จัดคนเข้าน้อย (แต่ถ้ามีแนวโน้มออเดอร์เยอะต้องเช็คกับทีม CS)
    - **แนะนำ:** ต้องมาร์กวันเงียบ/วันแคมเปญไว้ล่วงหน้าในตารางกะเสมอ

---

## 3. วันดอกไม้จีน (บังคับสำหรับ AI)
- **วันดอกไม้จีน** คือ “**ทุกวันอาทิตย์** และ **ทุกวันพฤหัสบดี**” ของแต่ละรอบตารางกะ
    - **AI ต้องแสดงชื่อวัน** (เช่น "วันอาทิตย์", "วันพฤหัสบดี") ใน Output ตารางกะของแต่ละวันเสมอ
    - ให้ใส่หมายเหตุในคอลัมน์หมายเหตุว่า “วันดอกไม้จีน (วันอาทิตย์)” หรือ “วันดอกไม้จีน (วันพฤหัสบดี)”
    - ทุกวันดอกไม้จีน **ต้องจัดให้ “แม็ก” (DC) และ “จี๊ด” (สาขา 2) เข้าทำงาน** เป็นพิเศษ
    - แม็ก (DC) หากขอหยุดวันดอกไม้จีน (อาทิตย์/พฤหัส) อนุโลมได้ 1-2 ครั้ง/เดือนเท่านั้น
    - หากวันดอกไม้จีนตรงกับวันหยุดนักขัตฤกษ์/วันเงียบ/วันแคมเปญ ต้องแสดงชื่อวันและใส่หมายเหตุประกอบ เช่น "วันดอกไม้จีน (วันอาทิตย์) ตรงกับวันแม่ — จัดคนเข้าเต็ม"
    - **ชื่อวันให้เขียนเป็นภาษาไทย** เช่น "วันอาทิตย์", "วันพฤหัสบดี" ทุกครั้ง

---

## 4. รายละเอียดตำแหน่งและกฎแต่ละทีม

### 4.1 ช่างดอกไม้สด

#### (1) สาขา DC & นารา (ใช้พนักงานชุดเดียวกัน)
- **นารา:**
    - จันทร์-ศุกร์:  
        - ต้องมีพนักงานเข้ากะ 7:00 น. 1 คน  
        - ต้องมีพนักงานเข้ากะ 11:00 น. 1 คน  
        - กะควรจัดต่อเนื่องเป็นชุด/คู่  
    - เสาร์-อาทิตย์:  
        - เข้ากะ 9:00 น. แค่ 1 คน ควรเป็นคนเดียวกัน 2 วัน ถ้าไม่ได้ให้แยกคน  
    - เฉลี่ยจำนวนวันเข้ากะนาราให้ใกล้เคียงกันที่สุด (ไม่ควรให้ใครเข้าเกิน 2 วันติด)
    - ถ้าใครเข้าเยอะเดือนนี้ เดือนหน้าควรสลับให้คนอื่นเข้าแทน
- **DC:**
    - ควรมีช่างเข้าอย่างต่ำวันละ 2-3 คน
    - วันจันทร์ และหลังวันหยุดนักขัตฤกษ์ ให้ช่างเข้าเยอะที่สุด
    - ห้ามมีช่าง DC เพียง 1 คน หากขาดคนต้องดึงทีมอื่นช่วย

#### (2) สาขา 2
- มีช่างดอกไม้สดกะ 8:00 น. และ 9:00 น.
- หมุนเวียนเข้ากะสลับกัน จำนวนวันเยอะในแต่ละเดือน (วนสลับให้ทุกคนได้รับภาระพอๆ กัน ไม่มีวันหยุดตายตัว ยกเว้นกรณีพิเศษ/ขอหยุด)

---

### 4.2 ผู้ช่วยช่างดอกไม้ & แอดมินดอกไม้สด

#### (1) ผู้ช่วยช่างดอกไม้
- **DC:**  
    - เข้างาน 9:00 น.
    - เน้นเข้าวันพฤหัสฯ และอาทิตย์ (เพราะเป็นวันดอกไม้จีนลง)
    - อนุโลมให้หยุดวันดังกล่าวได้ 1 ครั้ง/เดือน
- **สาขา 2:**  
    - เข้างาน 8:00 น.
    - เน้นเข้าวันพฤหัสฯ และอาทิตย์
    - อนุโลมให้หยุดวันดังกล่าวได้ 1 ครั้ง/เดือน

#### (2) แอดมินดอกไม้สด
- **DC (พี่รุ้ง, หนูดี):**
    - เข้างาน 9:00 น.
    - ต้องห้ามหยุดพร้อมกัน
    - ถ้าจำเป็นต้องหยุดพร้อมกัน ต้องมีพี่ฝน (ทีมประดิษฐ์) เข้างาน
    - **พี่รุ้ง:** ต้องหยุดเสาร์-อาทิตย์ 1 สัปดาห์ใน 1 เดือน
    - **หนูดี:** หยุดประจำวันอาทิตย์ (มีเรียน)
- **DC (แม็ก):**
    - เน้นเข้า พฤหัสฯ และอาทิตย์ (วันดอกไม้จีนลง) อยากให้เข้าเกือบทุกวัน
    - อนุโลมหยุดพฤหัสฯ/อาทิตย์ได้ 1-2 วัน/เดือน
    - ห้ามหยุดพร้อมกับพี่รุ้ง ถ้าจำเป็นต้องหยุดพร้อมกัน ต้องดูว่าพี่ฝนเข้างานหรือไม่ ถ้าพี่ฝนเข้า อนุโลมได้ 1 วัน (ไม่ควรลากยาว)
- **สาขา 2 (แป้ง):**
    - เข้างาน 9:00 น.
    - ถ้าแป้งหยุด วันนั้นควรมีช่างเข้าอย่างน้อย 3 คน (หนึ่งในนั้นต้องมาแทนแอดมิน)
    - ห้ามแป้งกับจี๊ด (ผู้ช่วยช่าง) หยุดพร้อมกัน ถ้าจำเป็นต้องหยุดพร้อมกัน ให้ช่างเข้าเยอะกว่าปกติ (รวมน้องสปายด้วย)
    - ถ้าแป้งหยุด ควรมีจี๊ดเข้า และต้องมีช่าง 1 คนทำแอดมินแทน

---

### 4.3 ทีมดอกไม้ประดิษฐ์

#### (1) DC (ศูนย์กระจายสินค้า)
- แก้ม: เข้ากะ 9:00 น. (จัดอย่างไรก็ได้)
- พี่ฝน: เข้ากะ 10:00 น. เน้นให้หยุดวันพุธหรือพฤหัส, ถ้าเป็นไปได้หยุดเสาร์-อาทิตย์ 1 สัปดาห์/เดือน
- **Keyman:**  
    - พี่ฝนเป็น Keyman (มีสกิลผู้ช่วยช่าง)
    - **ห้ามพี่ฝนกับน้องแก้ม หยุดพร้อมกัน**

#### (2) สาขา 2 (วงแหวน)
- พี่นุ่น: เข้ากะ 10:00 น. เน้นหยุดวันที่ 30-31-1 (หยุดทุกสิ้นเดือน) เป็น Keyman หลัก
- แฮน: เข้ากะ 10:00 น. (จัดอย่างไรก็ได้)
- พนักงานหลักอีก 2 คน: เข้ากะ 10:00 น. เหมือนกัน มักขอหยุด 30-31, จัดตารางได้ยืดหยุ่น (freestyle)
- **Keyman:**  
    - ห้ามพี่นุ่น (Keyman สาขา 2) กับพี่ฝน (Keyman DC) หยุดพร้อมกัน
    - หากจำเป็นต้องหยุดพร้อมกัน ต้องเป็นวันจันทร์-ศุกร์เท่านั้น และมีคนจัดรถแทน
    - ถ้าหยุดพร้อมกันในวันเสาร์-อาทิตย์ และไม่มีคนจัดรถ งานจะติดขัด

---

### 4.4 น้องฝึกงาน (สาขา 2 - สปาย)
- มีสกิลช่างและผู้ช่วยช่าง
- หมุนเวียนหน้าที่ได้
- หยุดเสาร์-อาทิตย์เป็นหลัก (ทำงาน จ-ศ)
- ถ้าจำเป็นต้องเข้าเสาร์-อาทิตย์ ต้องคุยรายกรณี

---

## 5. กฎสำคัญ/หมายเหตุพิเศษ (Special Constraints)
- **พี่รุ้ง:** ต้องหยุดเสาร์-อาทิตย์ 1 สัปดาห์ใน 1 เดือน
- **หนูดี:** หยุดประจำวันอาทิตย์ (มีเรียน)
- **พี่นุ่น:** เน้นหยุดวันที่ 30-31-1 เป็นพิเศษ (สิ้นเดือน)
- **พี่ฝน:** เน้นหยุดวันพุธหรือพฤหัส
- **DC:** ห้ามพี่รุ้ง, หนูดี, พี่ฝน หยุดพร้อมกัน
- ห้ามพี่ฝน (DC) และพี่นุ่น (สาขา 2) หยุดพร้อมกัน (ถ้าจำเป็นต้องหยุดพร้อมกัน ให้เป็นวันจันทร์-ศุกร์ และมีคนจัดรถแทน)
- หลังวันหยุดนักขัตฤกษ์ ให้คนเข้าเยอะที่สุด
- **ผู้ช่วยช่างกับแอดมิน** (ทุกสาขา) ห้ามหยุดพร้อมกัน  
    - ถ้าจำเป็นต้องหยุดพร้อมกัน ให้ดูว่า DC มีพี่ฝนเข้างาน หรือสาขา 2 มีพี่นุ่นเข้างาน

---

## 6. ปัญหาและความท้าทายที่ต้องระวัง
- ความไม่ลงตัวของจำนวนวันที่ช่างต้องสลับเข้าสาขา นารา
- วันหยุดที่ชนกันและตรวจสอบยากด้วยตาเปล่า
- กฎซับซ้อน มีโอกาสจัดผิดถ้าทำด้วยคน (เช่น กฎห้ามหยุดพร้อมกัน)
- สูตรใน Google Sheets ช่วยได้แต่ยังมีโอกาสผิดพลาด
- ผู้จัดตารางควรทบทวนกฎเหล่านี้สม่ำเสมอ

---

## 7. ผลลัพธ์ที่ต้องการ
- ตารางกะต้องบันทึกลง Google Sheet และให้อยู่ในรูปแบบตารางที่เข้าใจง่าย
- ควรแนบตาราง “วันเงียบ”, “วันแคมเปญ”, “วันดอกไม้จีน” เพิ่มเติมในข้อมูลที่ให้ AI/Dev ใช้งานเสมอ (เช่น เพิ่มคอลัมน์ is_holiday, is_flower_day)
- หากมีข้อยกเว้นหรือ Conflict ต้องแจ้งหมายเหตุไว้ใน Output
- **สำหรับวันดอกไม้จีน** (อาทิตย์/พฤหัส) ให้ AI แสดงชื่อวัน, Mark ในคอลัมน์หมายเหตุ, และจัดผู้ช่วยช่างเข้าอย่างน้อย 1 คนเสมอ

---

### **ตัวอย่างผลลัพธ์ตาราง (Output) สำหรับวันดอกไม้จีน**

| วันที่     | วันในสัปดาห์   | หมายเหตุ                               | ... |
|------------|----------------|-----------------------------------------|-----|
| 1/8/68     | พฤหัสบดี      | วันดอกไม้จีน (วันพฤหัสบดี)             |     |
| 4/8/68     | อาทิตย์       | วันดอกไม้จีน (วันอาทิตย์)              |     |
| 12/8/68    | จันทร์         | วันแม่ (แคมเปญ)                         |     |
| 15/8/68    | พฤหัสบดี      | วันดอกไม้จีน (วันพฤหัสบดี)             |     |
| ...        | ...            | ...                                     |     |

---

